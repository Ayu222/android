include @abs_top_srcdir@/tools/android/depends/Makefile.include
include @abs_top_srcdir@/tools/android/depends/android-sdk.mk

GLUEPATH = $(NDKROOT)/sources/android/native_app_glue
CFLAGS  += -I@abs_top_srcdir@/xbmc -I$(GLUEPATH)
LDFLAGS += -llog -landroid

SRCS     = $(GLUEPATH)/android_native_app_glue.c android_main.cpp
SOLIB    = libxbmcapp.so

all: $(SOLIB)

$(SOLIB): $(SRCS)
	$(CXX) $(CFLAGS) $(LDFLAGS) -o $@ -shared $(SRCS)

install: $(SOLIB)
	install $(SOLIB) $(PREFIX)/lib/$(SOLIB)

clean:
	-@rm -f $(SOLIB) 2>/dev/null || true
